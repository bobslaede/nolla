{
  "name": "travelogue",
  "description": "hapi passport.js integration helper",
  "version": "0.2.0",
  "author": {
    "name": "Van Nguyen",
    "email": "thegoleffect@gmail.com"
  },
  "contributors": [
    {
      "name": "Jared Hanson",
      "email": "jaredhanson@gmail.com"
    },
    {
      "name": "Eran Hammer",
      "email": "eran@hueniverse.com",
      "url": "http://hueniverse.com"
    }
  ],
  "repository": {
    "type": "git",
    "url": "git://github.com/spumko/travelogue.git"
  },
  "main": "index",
  "keywords": [
    "hapi",
    "passport",
    "passportjs",
    "oauth",
    "openid"
  ],
  "engines": {
    "node": "0.8.x"
  },
  "dependencies": {
    "boom": "0.3.x",
    "hoek": "0.7.x",
    "passport": "0.1.x",
    "yar": "0.2.x"
  },
  "peerDependencies": {
    "hapi": "0.16.x"
  },
  "devDependencies": {
    "hapi": "0.16.x",
    "lab": "0.0.x",
    "complexity-report": "0.x.x",
    "passport-local": "0.1.x"
  },
  "scripts": {
    "test": "make test-cov"
  },
  "licenses": [
    {
      "type": "BSD",
      "url": "http://github.com/spumko/travelogue/raw/master/LICENSE"
    }
  ],
  "readme": "<a href=\"https://github.com/spumko\"><img src=\"https://raw.github.com/spumko/spumko/master/images/from.png\" align=\"right\" /></a>\n![travelogue Logo](https://raw.github.com/spumko/travelogue/master/images/travelogue.png)\n\n[Passport.js](http://passportjs.org/) integration for [**hapi**](https://github.com/spumko/hapi)\n\n[![Build Status](https://secure.travis-ci.org/spumko/travelogue.png)](http://travis-ci.org/spumko/travelogue)\n\nTravelogue is a [Hapi plugin](https://github.com/spumko/hapi/blob/master/docs/Reference.md#server-plugins) that provides modular and unobtrusive authentication to Hapi through Passport. Travelogue supports almost every Passport strategy including Facebook OAuth, Google OpenID, and many others listed [here](https://github.com/jaredhanson/passport#strategies-1).\n\n\n## Install\n\n    $ npm install travelogue yar passport\n\n\n\n## Usage\n\nTravelogue has been designed to integrate consistently with Passport APIs - allowing developers who have used Passport before to use Travelogue with very few modifications.  Thus, most Travelogue apps will follow the same general format outlined below:\n\n```javascript\nvar config = {\n    hostname: 'localhost',\n    port: 8000,\n    urls: {\n        failureRedirect: '/login',\n        successRedirect: '/'\n    },\n    facebook: {\n        clientID: \"...\",\n        clientSecret: \"...\",\n        callbackURL: \"http://localhost:8000/auth/facebook/callback\"\n    }\n};\n\nvar plugins = {\n    yar: {\n        cookieOptions: {\n            password: 'worldofwalmart',\n            isSecure: false // required for non-https applications\n        }\n    },\n    travelogue: config\n};\n\nvar server = new Hapi.Server(config.hostname, config.port);\nserver.plugin.allow({ ext: true }).require(plugins, function (err) { \n\n    if (err) {\n        throw err;\n    }\n});\n\nvar Passport = server.plugins.travelogue.passport;\n\n// Follow normal Passport rules to add Strategies\nPassport.use(/* Strategy Goes Here */);\nPassport.serializeUser(ser);\nPassport.deserializeUser(deser);\n\n// Add your routes\nserver.route(routeOne);\n// ... \n\nserver.start(function () {\n\n    console.log('server started on port: ', server.settings.port);\n});\n```\n\n**Note:** Be careful with setting strategy `callbackURL`'s. If you are testing using `localhost:{port}`, make sure this matches the callbackURL exactly AND the designated callback URL in your third-party application settings.\n\n\n#### Known Broken/Unsupported Strategies\n\nNone so far. Will be listed here if they occur.\n\n\n### Route Handling\n\nThere are three common categories of third-party authentication route handling:\n\n* External Authentication\n* Internal Authentication\n* Authorization\n\nExternal Authentication allows the user to authenticate themselves via a third-party service like Facebook or Twitter.\n\nInternal Authentication returns the credentials from External Authentication for verification on the server and ultimately \"logs\" the user on (saves their session for subsequent visits).\n\nAuthorization checks whether or not the user logged-on is allowed to access a specific route or resource.\n\n\n#### External Authentication\n\nFor most third-party authentication schemes/strategies, External Authentication is done via a single route using the `Passport.authenticate(__strategy__)(request)` handler.\n\nThis handler typically will redirect the user to the third-party website, authenticate the user, and redirect to the `callbackURL` configured for that specific strategy (the Internal Authentication step).\n\n```javascript\nserver.addRoute({\n    method: 'GET',\n    path: '/auth/facebook',\n    config: {\n        handler: function (request) {\n            Passport.authenticate('facebook')(request);\n        }\n    }\n});\n```\n\n#### Internal Authentication\n\nFor all authentication schemes and strategies, the External Authentication information must be sent back to the server. Thus, one route handler must be specifically catered to the task of retrieving this information and processing it appropriately (using the `Passport.authenticate(strategy, options)(request, passthroughHandler)` format).\n\n```javascript\nserver.addRoute({\n    method: 'GET',\n    path: '/auth/facebook/callback',\n    config: {\n        handler: function (request) {\n            \n            Passport.authenticate('facebook', {\n                failureRedirect: config.urls.failureRedirect,\n                successRedirect: config.urls.successRedirect,\n                failureFlash: true\n            })(request, function () {\n\n                return request.reply.redirect('/').send();\n            });\n        }\n    }\n});\n```\n\n#### Authorization\n\nAfter verifying the identity of a user, the server will need to determine the permissions a user has for specific routes and resources.\n\nIn the typical case, once verified and logged-in, the user has full access to a new set of routes. Travelogue provides a shortcut to verify that a user is logged-on via the `config.auth` interface.\n\n```javascript\nserver.addRoute({\n    method: 'GET',\n    path: '/home',\n    config: { auth: 'passport' },\n    handler: function (request) {\n\n        // If logged in already, redirect to /home\n        // else to /login\n        request.reply(\"ACCESS GRANTED\");\n    }\n});\n```\n\nHowever, it may be the case that there may be several levels of user access permissions. Just like with Passport, a custom function can be created similar to Passport's typical `ensureAuthenticated`.\n\n\n#### Conflicts with Other Hapi Auth Schemes\n\nIt is possible to use multiple Hapi authentication schemes simultaneously within one application. To prevent conflicts, set the `config.auth` to `false` in any handler that should NOT use any auth schemes. An example is shown below.\n\n```javascript\nserver.addRoute({\n    method: 'GET',\n    path: '/',\n    config: { \n        auth: false,\n        handler: function (request) {\n\n            request.reply(\"Ohai\");\n        }\n    },\n});\n```\n\n\n## API Reference\n\nWhile, Travelogue only requires the use of a few functions to configure and set up Passport authentication, it may be important to customize Travelogue's behavior outside the defaults. Therefore, Travelogue exposes several low-level methods. This section contains documentation for all methods and variables (__**but may be incomplete for the time being**__).\n\n### Settings\n\nSome settings must be passed into the Hapi plugins architecture.\n\n- `yar` - the options object passed to yar\n    - `cookieOptions`\n        - `password` - (Required) secret key used to hash cookie\n        - `isSecure` - enables TLS/SSL cookies. Defaults to **true**. Disable for normal http.\n- `travelogue` - the options object passed to travelogue\n    - `defaultMode` - (Optional) If enable, will auto-assign routes to use default auth strategy (which may not necessarily be passport). Defaults to **false**.\n    - `urls` - Urls used by Travelogue/Passport\n        - `failureRedirect` - redirect to this relative URL on failed logins. Defaults to **'/login'**.\n        - `successRedirect` - redirect to this relative URL on successful logins. Defaults to **'/'**.\n\n\nReturns null.\n\n### API\n\n**Travelogue.passport**\n\nReturns an alternative reference to the passport module. Can also be accessed from `server.plugins.travelogue.passport`.\n\n**Travelogue.middleware**\n\nProvides direct access to the passport middlewares specifically created for Hapi.\n\nReturns an object with the following interface:\n\n- `authenticate` - authentication related functions\n- `initialize` - initialization related functions\n\nThose functions can be modified to add custom behavior with respect to Passport. Modify at your own risk.\n\n### Request-level\n\n**Request.session._isAuthenticated()**\n\nReturns true if the request is authenticated; false, otherwise.\n\n**Request.session._logIn(user, options, next)**\n\nProvides a direct interface to setting or modifying the user session data.\n\n- `user` - (Required) an object that contains user session data\n- `options` - the options object (currently unused)\n- `next` - (Required) callback function to execute on completion or failure\n\nReturns null. \n\n**Request.session._logOut()**\n\nPermanently deletes the user session data ( thus unauthenticating the user and clearing out cookies).\n\nReturns null.\n",
  "readmeFilename": "README.md",
  "_id": "travelogue@0.2.0",
  "dist": {
    "shasum": "0dcb0e444f8d045b33f62d1d3bb92dd8a6382dfd"
  },
  "_from": "travelogue@",
  "_resolved": "https://registry.npmjs.org/travelogue/-/travelogue-0.2.0.tgz"
}
